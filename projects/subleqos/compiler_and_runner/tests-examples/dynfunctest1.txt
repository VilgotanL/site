
inline void* load(void* dynf) {
    void *p = true_malloc(len(dynf));
    for(int i=0; i<len(dynf); i++)
        p[i] = dynf[i]+p-dynf;
    return p;
}


dynamic int add(int a, int b) {
    int res = a + b;
    return res;
}
void* func = load(dynf_ptr(add));
true_io_putch '0'+func(2, 3);

dynamic int factorial(int n) {
    if(n <= 1) return 1;
    true_io_putch 'F';
    int factPrev = load(dynf_ptr(factorial))(n-1);
    int res = 0;
    for(int i=0; i<n; i++) res += factPrev;
    return res;
}
true_io_putch '0'+load(dynf_ptr(factorial))(3);